(()=>{"use strict";(function(e,t="+7 (___) ___-__-__"){const l=document.querySelectorAll(e);function s(e){const l=e.keyCode,s=t,a=s.replace(/\D/g,""),n=this.value.replace(/\D/g,"");console.log(s);let o=0,c=s.replace(/[_\d]/g,(function(e){return o<n.length?n.charAt(o++)||a.charAt(o):e}));o=c.indexOf("_"),-1!==o&&(c=c.slice(0,o));let r=s.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||l>47&&l<58)&&(this.value=c),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of l)e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)})(".tel"),(()=>{document.querySelectorAll(".callback-btn")[1],document.querySelector(".modal-close");const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal-callback");document.addEventListener("click",(l=>{let s=l.target;s.closest('a[href="#callback"]')?(e.style.display="block",t.style.display="block"):s.classList.contains("modal-overlay")||s.closest('img[alt="modal-close"]')?(e.style.display="none",t.style.display="none"):(s.closest('a[href="#feedback"]')||s.closest('a[href="#application"]'))&&(e.style.display="block",t.style.display="block")}))})(),(()=>{const e=document.querySelectorAll(".item");document.querySelector(".top-slider");let t=0;setInterval((()=>{e[t].classList.remove("item-active"),e[t].classList.add("item-not-active"),t++,t>=e.length&&(t=0),e[t].classList.add("item-active"),e[t].classList.remove("item-not-active")}),3e3)})(),(()=>{let e=document.querySelector(".up");e.classList.add("up-none");let t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset;t>580&&e.classList.remove("up-none"),t<580&&e.classList.add("up-none")})),e.addEventListener("click",t)})(),(()=>{const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const l=t.getAttribute("href");"#"!==l&&document.querySelector(""+l).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelectorAll(".element");e.forEach((t=>{t.addEventListener("click",(function(){this.classList.contains("active")?this.classList.remove("active"):(e.forEach((e=>{e.classList.remove("active")})),this.classList.add("active"))}))}))})(),(()=>{const e=document.querySelector("form"),t=document.createElement("div");e.addEventListener("submit",(s=>{s.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const a=new FormData(e);let n={};a.forEach(((e,t)=>{n[t]=e})),l(n,(()=>{t.textContent="Спасибо! Мы скоро с вами свяжемся"}),(e=>{t.textContent="Что-то пошло не так...",console.error(e)}))}));const l=(e,t,l)=>{const a=new XMLHttpRequest;a.addEventListener("readystatechange",(()=>{4===a.readyState&&(200===a.status?(t(),s()):(l(a.status),s()))})),a.open("POST",".server.php"),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(e))},s=()=>{a(e),t.style.cssText="",setTimeout((()=>{t.textContent=""}),3e3)},a=e=>{const t=e.querySelectorAll(".form-control");t.forEach((e=>e.value="")),console.log(t)}})(),(()=>{let e=!1;const t=l=>{l.target.value=l.target.value.replace(/-+(?=-+)| +(?= +)|-+(?= +)| +(?=-+)|^ +| +$|^-+|-+$/gi,""),"fio"===l.target.name&&(l.target.value=l.target.value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" ")),l.target.removeEventListener("blur",t),e=!e},l=l=>{e||(l.target.addEventListener("blur",t),e=!e)};document.addEventListener("input",(e=>{"tel"===e.target.name?(e=>{e.target.value=e.target.value.replace(/[^\d()-+]/gi,""),l(e)})(e):"fio"===e.target.name&&(e=>{e.target.value=e.target.value.replace(/[^а-я- ]/gi,""),l(e)})(e)}))})()})();