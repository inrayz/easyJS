(()=>{"use strict";(function(e,t="+7 (___) ___-__-__"){const l=document.querySelectorAll(e);function a(e){const l=e.keyCode,a=t,s=a.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let o=0,c=a.replace(/[_\d]/g,(function(e){return o<n.length?n.charAt(o++)||s.charAt(o):e}));o=c.indexOf("_"),-1!==o&&(c=c.slice(0,o));let r=a.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||l>47&&l<58)&&(this.value=c),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of l)e.addEventListener("input",a),e.addEventListener("focus",a),e.addEventListener("blur",a)})(".tel"),(()=>{document.querySelectorAll(".callback-btn")[1],document.querySelector(".modal-close");const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal-callback");document.addEventListener("click",(l=>{let a=l.target;a.closest('a[href="#callback"]')?(e.style.display="block",t.style.display="block"):a.classList.contains("modal-overlay")||a.closest('img[alt="modal-close"]')?(e.style.display="none",t.style.display="none"):(a.closest('a[href="#feedback"]')||a.closest('a[href="#application"]'))&&(e.style.display="block",t.style.display="block")}))})(),(()=>{const e=document.querySelectorAll(".item"),t=document.querySelectorAll(".table");document.querySelector(".top-slider");let l=0;t.forEach((e=>{e.style.visibility="visible",e.style.opacity="1"})),setInterval((()=>{e[l].classList.remove("item-active"),e[l].classList.add("item-not-active"),l++,l>=e.length&&(l=0),e[l].classList.add("item-active"),e[l].classList.remove("item-not-active")}),3e3)})(),(()=>{let e=document.querySelector(".up");e.classList.add("up-none");let t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset;t>580&&e.classList.remove("up-none"),t<580&&e.classList.add("up-none")})),e.addEventListener("click",t)})(),(()=>{const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const l=t.getAttribute("href");"#"!==l&&document.querySelector(""+l).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelectorAll(".element");e.forEach((t=>{t.addEventListener("click",(function(){this.classList.contains("active")?this.classList.remove("active"):(e.forEach((e=>{e.classList.remove("active")})),this.classList.add("active"))}))}))})(),(()=>{const e=document.querySelector("form"),t=document.querySelector(".modal-overlay"),l=document.querySelector(".modal-callback"),a=document.createElement("div");e.addEventListener("submit",(t=>{t.preventDefault(),e.appendChild(a),a.textContent="Загрузка...";const l=new FormData(e);let n={};l.forEach(((e,t)=>{n[t]=e})),s(n,(()=>{a.textContent="Спасибо! Мы скоро с вами свяжемся"}),(e=>{a.textContent="Что-то пошло не так..."}))}));const s=(e,a,s)=>{const o=new XMLHttpRequest;o.addEventListener("readystatechange",(()=>{4===o.readyState&&(200===o.status?(a(),n(),setTimeout((()=>{t.style.display="none",l.style.display="none"}),2e3)):(s(o.status),n(),setTimeout((()=>{t.style.display="none",l.style.display="none"}),3e3)))})),o.open("POST","./server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))},n=()=>{o(e),a.style.cssText="",setTimeout((()=>{a.textContent=""}),3e3)},o=e=>{e.querySelectorAll(".form-control").forEach((e=>e.value=""))}})(),(()=>{let e=!1;const t=l=>{l.target.value=l.target.value.replace(/-+(?=-+)| +(?= +)|-+(?= +)| +(?=-+)|^ +| +$|^-+|-+$/gi,""),"fio"===l.target.name&&(l.target.value=l.target.value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" ")),l.target.removeEventListener("blur",t),e=!e},l=l=>{e||(l.target.addEventListener("blur",t),e=!e)};document.addEventListener("input",(e=>{"tel"===e.target.name?(e=>{e.target.value=e.target.value.replace(/[^\d()-+]/gi,""),l(e)})(e):"fio"===e.target.name&&(e=>{e.target.value=e.target.value.replace(/[^а-я- ]/gi,""),l(e)})(e)}))})()})();