(()=>{"use strict";(function(e,t="+7 (___) ___-__-__"){const l=document.querySelectorAll(e);function s(e){const l=e.keyCode,s=t,a=s.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let o=0,r=s.replace(/[_\d]/g,(function(e){return o<n.length?n.charAt(o++)||a.charAt(o):e}));o=r.indexOf("_"),-1!==o&&(r=r.slice(0,o));let c=s.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||l>47&&l<58)&&(this.value=r),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of l)e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)})(".tel"),(()=>{document.querySelectorAll(".callback-btn")[1],document.querySelector(".modal-close");const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal-callback");document.addEventListener("click",(l=>{let s=l.target;s.closest('a[href="#callback"]')?(e.style.display="block",t.style.display="block"):s.classList.contains("modal-overlay")||s.closest('img[alt="modal-close"]')?(e.style.display="none",t.style.display="none"):(s.closest('a[href="#feedback"]')||s.closest('a[href="#application"]'))&&(e.style.display="block",t.style.display="block")}))})(),(()=>{const e=document.querySelectorAll(".item"),t=document.querySelectorAll(".table");document.querySelector(".top-slider");let l=0;t.forEach((e=>{e.style.visibility="visible",e.style.opacity="1"})),setInterval((()=>{e[l].classList.remove("item-active"),e[l].classList.add("item-not-active"),l++,l>=e.length&&(l=0),e[l].classList.add("item-active"),e[l].classList.remove("item-not-active")}),3e3)})(),(()=>{let e=document.querySelector(".up");e.classList.add("up-none");let t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset;t>580&&e.classList.remove("up-none"),t<580&&e.classList.add("up-none")})),e.addEventListener("click",t)})(),(()=>{const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const l=t.getAttribute("href");"#"!==l&&document.querySelector(""+l).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelectorAll(".element");e.forEach((t=>{t.addEventListener("click",(function(){this.classList.contains("active")?this.classList.remove("active"):(e.forEach((e=>{e.classList.remove("active")})),this.classList.add("active"))}))}))})(),(()=>{const e=document.querySelector("form"),t=document.querySelector(".modal-overlay"),l=document.querySelector(".modal-callback"),s=document.createElement("div");e.addEventListener("submit",(t=>{t.preventDefault(),e.appendChild(s),s.textContent="Загрузка...";const l=new FormData(e);let n={};l.forEach(((e,t)=>{n[t]=e})),a(n,(()=>{s.textContent="Спасибо! Мы скоро с вами свяжемся"}),(e=>{s.textContent="Что-то пошло не так..."}))}));const a=(e,s,a)=>{const o=new XMLHttpRequest;o.addEventListener("readystatechange",(()=>{4===o.readyState&&(200===o.status?(s(),n(),setTimeout((()=>{t.style.display="none",l.style.display="none"}),2e3)):(a(o.status),n(),setTimeout((()=>{t.style.display="none",l.style.display="none"}),3e3)))})),o.open("POST","./server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))},n=()=>{o(e),s.style.cssText="",setTimeout((()=>{s.textContent=""}),3e3)},o=e=>{e.querySelectorAll(".form-control").forEach((e=>e.value=""))}})(),(()=>{let e=!1;const t=l=>{l.target.value=l.target.value.replace(/-+(?=-+)| +(?= +)|-+(?= +)| +(?=-+)|^ +| +$|^-+|-+$/gi,""),"fio"===l.target.name&&(l.target.value=l.target.value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" ")),l.target.removeEventListener("blur",t),e=!e},l=l=>{e||(l.target.addEventListener("blur",t),e=!e)};document.addEventListener("input",(e=>{"tel"===e.target.name?(e=>{e.target.value=e.target.value.replace(/[^\d()-+]/gi,""),l(e)})(e):"fio"===e.target.name&&(e=>{e.target.value=e.target.value.replace(/[^а-я- ]/gi,""),l(e)})(e)}));const s=document.querySelector("input[name=fio]"),a=document.querySelector("input[name=tel]"),n=document.querySelector("input[type=submit]");s.setAttribute("required","required"),a.setAttribute("required","required"),document.addEventListener("input",(()=>{s.value.length<2?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"),a.value.length<14?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled")}))})()})();