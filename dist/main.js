(()=>{"use strict";(function(e,t="+7 (___) ___-__-__"){const l=document.querySelectorAll(e);function a(e){const l=e.keyCode,a=t,s=a.replace(/\D/g,""),o=this.value.replace(/\D/g,"");let n=0,c=a.replace(/[_\d]/g,(function(e){return n<o.length?o.charAt(n++)||s.charAt(n):e}));n=c.indexOf("_"),-1!==n&&(c=c.slice(0,n));let r=a.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||l>47&&l<58)&&(this.value=c),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of l)e.addEventListener("input",a),e.addEventListener("focus",a),e.addEventListener("blur",a)})(".tel"),(()=>{document.querySelectorAll(".callback-btn")[1],document.querySelector(".modal-close");const e=document.querySelector(".modal-overlay"),t=document.querySelector(".modal-callback");document.addEventListener("click",(l=>{let a=l.target;a.closest('a[href="#callback"]')?(e.style.display="block",t.style.display="block"):a.classList.contains("modal-overlay")||a.closest('img[alt="modal-close"]')?(e.style.display="none",t.style.display="none"):(a.closest('a[href="#feedback"]')||a.closest('a[href="#application"]'))&&(e.style.display="block",t.style.display="block")}))})(),(()=>{const e=document.querySelectorAll(".item");document.querySelector(".top-slider");let t=0;setInterval((()=>{e[t].classList.remove("item-active"),e[t].classList.add("item-not-active"),t++,t>=e.length&&(t=0),e[t].classList.add("item-active"),e[t].classList.remove("item-not-active")}),3e5)})(),(()=>{let e=document.querySelector(".up");e.classList.add("up-none");let t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset;t>580&&e.classList.remove("up-none"),t<580&&e.classList.add("up-none")})),e.addEventListener("click",t)})(),(()=>{const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const l=t.getAttribute("href");"#"!==l&&document.querySelector(""+l).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelectorAll(".element");e.forEach((t=>{t.addEventListener("click",(function(){this.classList.contains("active")?this.classList.remove("active"):(e.forEach((e=>{e.classList.remove("active")})),this.classList.add("active"))}))}))})(),(()=>{const e="Спасибо! Мы скоро с вами свяжемся",t=document.querySelector("form"),l=document.querySelector(".modal-overlay"),a=document.querySelector(".modal-callback"),s=document.createElement("div");t.addEventListener("submit",(l=>{l.preventDefault(),t.appendChild(s),s.textContent="Загрузка...";const a=new FormData(t);let n={};a.forEach(((e,t)=>{n[t]=e})),o(n,(()=>{s.textContent=e}),(e=>{s.textContent="Что-то пошло не так...",console.error(e)}))}));const o=(t,s,o)=>{const c=new XMLHttpRequest;c.addEventListener("readystatechange",(()=>{4===c.readyState&&(200===c.status?(s(),n(),l.style.display="none",a.style.display="none",alert(e)):(o(c.status),n()))})),c.open("POST","./server.php"),c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify(t))},n=()=>{c(t),s.style.cssText="",setTimeout((()=>{s.textContent=""}),3e3)},c=e=>{const t=e.querySelectorAll(".form-control");t.forEach((e=>e.value="")),console.log(t)}})(),(()=>{let e=!1;const t=l=>{l.target.value=l.target.value.replace(/-+(?=-+)| +(?= +)|-+(?= +)| +(?=-+)|^ +| +$|^-+|-+$/gi,""),"fio"===l.target.name&&(l.target.value=l.target.value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" ")),l.target.removeEventListener("blur",t),e=!e},l=l=>{e||(l.target.addEventListener("blur",t),e=!e)};document.addEventListener("input",(e=>{"tel"===e.target.name?(e=>{e.target.value=e.target.value.replace(/[^\d()-+]/gi,""),l(e)})(e):"fio"===e.target.name&&(e=>{e.target.value=e.target.value.replace(/[^а-я- ]/gi,""),l(e)})(e)}))})()})();